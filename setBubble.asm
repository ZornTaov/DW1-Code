void setBubble(bubbleType, entityPtr) {
  for(instanceId = 0; instanceId < 3; instanceId++)
    if(load(0x155560 + instanceId * 0x18) < 0)
      break
  
  if(instanceId == 3)
    return -1
  
  instancePtr = 0x155560 + v1
  height = -load(0x12CECE + load(entityPtr) * 52) + 20
  
  store(instancePtr + 0x00, 0) // frame count
  store(instancePtr + 0x02, height)
  store(instancePtr + 0x04, height)
  store(instancePtr + 0x06, 0) // another frame count
  store(instancePtr + 0x08, load(0x12CE44 + bubbleType * 4)) // icon pointer
  store(instancePtr + 0x0C, 0) // scale?
  store(instancePtr + 0x10, 0) // scale?
  store(instancePtr + 0x14, entityPtr)
  
  setObject(0x0802, instanceId, 0xECC60, 0xEC644)
  return instanceId
}

0x000ec538 addiu sp,sp,0xffe8
0x000ec53c sw ra,0x0014(sp)
0x000ec540 sw s0,0x0010(sp)
0x000ec544 addu s0,r0,r0
0x000ec548 beq r0,r0,0x000ec574
0x000ec54c addu v1,r0,r0
0x000ec550 lui v0,0x8015
0x000ec554 addiu v0,v0,0x5560
0x000ec558 addu v0,v0,v1
0x000ec55c lh v0,0x0000(v0)
0x000ec560 nop
0x000ec564 bltz v0,0x000ec580
0x000ec568 nop
0x000ec56c addi s0,s0,0x0001
0x000ec570 addi v1,v1,0x0018
0x000ec574 slti asmTemp,s0,0x0003
0x000ec578 bne asmTemp,r0,0x000ec550
0x000ec57c nop
0x000ec580 addiu asmTemp,r0,0x0003
0x000ec584 bne s0,asmTemp,0x000ec594
0x000ec588 nop
0x000ec58c beq r0,r0,0x000ec634
0x000ec590 addiu v0,r0,0xffff
0x000ec594 sll v0,s0,0x01
0x000ec598 add v0,v0,s0
0x000ec59c sll v1,v0,0x03
0x000ec5a0 lui v0,0x8015
0x000ec5a4 addiu v0,v0,0x5560
0x000ec5a8 addu a2,v0,v1
0x000ec5ac sh r0,0x0000(a2)
0x000ec5b0 lw v1,0x0000(a1)
0x000ec5b4 lui a3,0x800f
0x000ec5b8 sll v0,v1,0x01
0x000ec5bc add v0,v0,v1
0x000ec5c0 sll v0,v0,0x02
0x000ec5c4 add v0,v0,v1
0x000ec5c8 sll v1,v0,0x02
0x000ec5cc lui v0,0x8013
0x000ec5d0 addiu v0,v0,0xcece
0x000ec5d4 addu v0,v0,v1
0x000ec5d8 lh v0,0x0000(v0)
0x000ec5dc sll v1,a0,0x02
0x000ec5e0 sub v0,r0,v0
0x000ec5e4 addi v0,v0,0x0014
0x000ec5e8 sh v0,0x0004(a2)
0x000ec5ec lh v0,0x0004(a2)
0x000ec5f0 addiu a0,r0,0x0802
0x000ec5f4 sh v0,0x0002(a2)
0x000ec5f8 sw a1,0x0014(a2)
0x000ec5fc sw r0,0x000c(a2)
0x000ec600 lui v0,0x8013
0x000ec604 sw r0,0x0010(a2)
0x000ec608 addiu v0,v0,0xce44
0x000ec60c sh r0,0x0006(a2)
0x000ec610 addu v0,v0,v1
0x000ec614 lw v0,0x0000(v0)
0x000ec618 addu a1,s0,r0
0x000ec61c sw v0,0x0008(a2)
0x000ec620 lui a2,0x800f
0x000ec624 addiu a2,a2,0xcc60
0x000ec628 jal 0x000a2f64
0x000ec62c addiu a3,a3,0xc644
0x000ec630 addu v0,s0,r0
0x000ec634 lw ra,0x0014(sp)
0x000ec638 lw s0,0x0010(sp)
0x000ec63c jr ra
0x000ec640 addiu sp,sp,0x0018