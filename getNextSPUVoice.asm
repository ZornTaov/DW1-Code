int getNextSPUVoice(unused) {
  for(i = 0; i < 14; i++) {
    voiceId = 10 + ((load(0x134D90) + i) % 14)
    voiceState = getSPUVoiceState(1 << voiceId)
    
    if(voiceState != 1)
      break
  }
  
  if(i == 14)
    voiceId = load(0x134D90) + 10
  
  store(0x134D90, (voiceId - 9) % 14)
  
  return voiceId
}

0x000c6134 addiu sp,sp,0xffe0
0x000c6138 sw ra,0x0018(sp)
0x000c613c sw s1,0x0014(sp)
0x000c6140 sw s0,0x0010(sp)
0x000c6144 beq r0,r0,0x000c6184
0x000c6148 addu s0,r0,r0
0x000c614c lw v0,-0x6d9c(gp)
0x000c6150 nop
0x000c6154 add v1,s0,v0
0x000c6158 addiu v0,r0,0x000e
0x000c615c div v1,v0
0x000c6160 mfhi v0
0x000c6164 addi s1,v0,0x000a
0x000c6168 addiu v0,r0,0x0001
0x000c616c jal 0x000c8da8
0x000c6170 sllv a0,v0,s1
0x000c6174 addiu asmTemp,r0,0x0001
0x000c6178 bne v0,asmTemp,0x000c6190
0x000c617c nop
0x000c6180 addi s0,s0,0x0001
0x000c6184 slti asmTemp,s0,0x000e
0x000c6188 bne asmTemp,r0,0x000c614c
0x000c618c nop
0x000c6190 addiu asmTemp,r0,0x000e
0x000c6194 bne s0,asmTemp,0x000c61a8
0x000c6198 nop
0x000c619c lw v0,-0x6d9c(gp)
0x000c61a0 nop
0x000c61a4 addi s1,v0,0x000a
0x000c61a8 addi v1,s1,-0x0009
0x000c61ac addiu v0,r0,0x000e
0x000c61b0 div v1,v0
0x000c61b4 mfhi v0
0x000c61b8 sw v0,-0x6d9c(gp)
0x000c61bc addu v0,s1,r0
0x000c61c0 lw ra,0x0018(sp)
0x000c61c4 lw s1,0x0014(sp)
0x000c61c8 lw s0,0x0010(sp)
0x000c61cc jr ra
0x000c61d0 addiu sp,sp,0x0020