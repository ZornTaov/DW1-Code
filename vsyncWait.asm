vsyncWait(targetFrame, timeout) { // wait till frame
  timeoutCounter = timeout << 0x0F
  
  while(load(0x116B30) < targetFrame) { // current frame
    if(--timeoutCounter == -1) {
      std_out_puts(0x113BEC) // "VSync timeout\n"
      ChangeClearPad(0)
      ChangeClearRCnt(3, 0) // vblank, do nothing
      break
    }
  }
}

0x00091c10 addiu sp,sp,0xffe0
0x00091c14 sll a1,a1,0x0f
0x00091c18 sw a1,0x0010(sp)
0x00091c1c lui v0,0x8011
0x00091c20 lw v0,0x6b30(v0)
0x00091c24 nop
0x00091c28 slt v0,v0,a0
0x00091c2c beq v0,r0,0x00091c98
0x00091c30 sw ra,0x0018(sp)
0x00091c34 addiu v1,r0,0xffff
0x00091c38 lw v0,0x0010(sp)
0x00091c3c nop
0x00091c40 addiu v0,v0,0xffff
0x00091c44 sw v0,0x0010(sp)
0x00091c48 lw v0,0x0010(sp)
0x00091c4c nop
0x00091c50 bne v0,v1,0x00091c80
0x00091c54 nop
0x00091c58 lui a0,0x8011
0x00091c5c jal 0x00091184
0x00091c60 addiu a0,a0,0x3bec
0x00091c64 jal 0x000909e8
0x00091c68 addu a0,r0,r0
0x00091c6c addiu a0,r0,0x0003
0x00091c70 jal 0x00090a18
0x00091c74 addu a1,r0,r0
0x00091c78 j 0x00091c98
0x00091c7c nop
0x00091c80 lui v0,0x8011
0x00091c84 lw v0,0x6b30(v0)
0x00091c88 nop
0x00091c8c slt v0,v0,a0
0x00091c90 bne v0,r0,0x00091c38
0x00091c94 nop
0x00091c98 lw ra,0x0018(sp)
0x00091c9c addiu sp,sp,0x0020
0x00091ca0 jr ra
0x00091ca4 nop